var oThat;sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/BusyDialog","sap/ui/model/json/JSONModel","sap/ui/model/Filter"],function(e,o,t,a,r){"use strict";return e.extend("ZGT_MM_INBOUND.controller.Approve",{onInit:function(){oThat=this;oThat.BusyDialog=new t;oThat.oView=this.getView();this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("Approve").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){oThat.BusyDialog=new t;oThat=this;oThat.oView=oThat.getView();oThat.Core=sap.ui.getCore();oThat.oModel=oThat.getOwnerComponent().getModel();oThat.Service="GET";var o={d:{GateEntry:"",VehAssign:"",PreQual:"",UnloadConf:"",GateExit:"",Inbound:"X",Outbound:"",IvDelivery:"",IvPo:"",IvWbid:"",IvWerks:"",StatusUpdate:"",Approval:"X",GetReturnNav:[],PoItemNav:[],QualWbidNav:[],WbItemNav:[],WsItemNav:[],WbHeaderNav:[],StatusUpdateNav:[],ApprovalNav:[]}};oThat.onCallService(oThat.Service,o)},onCallService:function(e,o){oThat.BusyDialog.open();if(oThat.Service==="GET"){oThat.oModel.create("/GetHeadersSet",o,{success:oThat.mySuccessHandler,error:oThat.myErrorHandler})}else if(oThat.Service==="SAVE"){oThat.oModel.create("/PostHeadersSet",o,{success:oThat.mySuccessHandler,error:oThat.myErrorHandler})}},mySuccessHandler:function(e,o){oThat.BusyDialog.close();if(oThat.Service==="GET"){oThat.oView.setModel(new a(e),"oApproveModel");oThat.oView.getModel("oApproveModel").refresh(true)}else if(oThat.Service==="SAVE"){oThat.Approve.destroy();oThat.Service="GET";var t={d:{GateEntry:"",VehAssign:"",PreQual:"",UnloadConf:"",GateExit:"",Inbound:"X",Outbound:"",IvDelivery:"",IvPo:"",IvWbid:"",IvWerks:"",StatusUpdate:"",Approval:"X",GetReturnNav:[],PoItemNav:[],QualWbidNav:[],WbItemNav:[],WsItemNav:[],WbHeaderNav:[],StatusUpdateNav:[],ApprovalNav:[]}};oThat.onCallService(oThat.Service,t)}},myErrorHandler:function(e){oThat.BusyDialog.close();var t=oThat.oView.getModel("i18n").getResourceBundle().getText("Title21");o.show(e.responseText,o.Icon.ERROR,t)},onPressListItem:function(e){var o=e.getSource().getBindingContextPath();var t=oThat.oView.getModel("oApproveModel").getObject(o);oThat.oView.setModel(new a(t),"Approve");oThat.oView.getModel("Approve").refresh(true);oThat.Approve=sap.ui.xmlfragment("ZGT_MM_INBOUND.Fragments.Approve",oThat);oThat.oView.addDependent(oThat.Approve);oThat.Approve.setEscapeHandler(oThat.onEscapeApprove);oThat.Approve.open()},fnApproveReject:function(e){oThat.vId=e.getSource().getId();var t="";if(oThat.vId.indexOf("id_BtnApprove")!=-1){t="A"}else if(oThat.vId.indexOf("id_BtnReject")!=-1){t="R";if(oThat.oView.getModel("Approve").getData().Reason==""){o.error(oThat.oView.getModel("i18n").getResourceBundle().getText("ErrorMsg9"));return}}var a={d:{GateEntry:"",VehAssign:"",PreQual:"",UnloadConf:"",GateExit:"",Inbound:"X",Approval:"X",IvAction:t,IvWboj:oThat.EvWtype,IvWbid:oThat.oView.getModel("Approve").getData().Wbid,Outbound:"",PostReturnNav:[],PostWbHeaderNav:[{Reason:oThat.oView.getModel("Approve").getData().Reason}],PostWbitemNav:[],PostWsItemNav:[],PostDmsNav:[]}};oThat.Service="SAVE";oThat.onCallService(oThat.Service,a)},onClickBack:function(){oThat.Approve.destroy()},onEscapeApprove:function(){oThat.Approve.destroy()},onNavBack:function(){this.oRouter.navTo("Inbound")}})});
//# sourceMappingURL=Approve.controller.js.map